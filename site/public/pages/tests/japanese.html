<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day By Day - Teste Japonês</title>
    <link rel="stylesheet" href="./test.css">
</head>
<body>
    <div class="alerta" id="notification">
        <div class="icon">
            <div class="circle">
                !
            </div>
        </div>
        <div class="text">
            <p  id="content"></p>
        </div>
    </div>
    <div class="main">
        <div class="mainMenu" id="menu">
            <div class="container borderBot">
                <div class="link">
                    <a href="../../index.html">Inicio</a>
                </div>
                <div class="link">
                    <a href="../perfil.html">Perfil</a>
                </div>
                <div class="link">
                    <a href="../cursos.html">Cursos</a>
                </div>
                <div class="link">
                    <a href="../future.html">Futuro</a>
                </div>
            </div>
        </div>
        <div class="nav borderBot">
            <div class="logo">
                <a href="../../index.html">Day by Day</a>
            </div>
            <div class="menu" onclick="toggle()">
                <div class="icon"></div>
                <p>menu</p>
            </div>
            <div class="register">
                <ul>
                    <li class="borderRight"><a href="./login.html">login</a></li>
                    <li><a href="./register.html">cadastrar</a></li>
                </ul>
            </div>
        </div>


        <div class="instructions">
            <h1>Teste seu nivel de Japonês</h1>
            <ul>
                <li><p>Leia com atenção o enunciado das questões</p></li>
                <li><p>Entre as quatro opções escolha a alternativa correta</p></li>
                <li><p>Após responder todas as questões clique em enviar para ver o resultado</p></li>
            </ul>
        </div>

        <div class="questions">
            <div class="enunciado">
                <h1>Leia as frases em Hiragana e selecione a alternative que corresponde corretamente
                    a frase escrita em romaji.
                </h1>
            </div>
            <div class="box">
                <div class="question">
                    <h1>1. おなかすいって</h1>
                </div>
                <form action="">
                    <div class="item">
                        <input type="radio" id="" name="fav_language" value="a">
                        <label for="1a">a. osunakutte</label>
                    </div>
                    <div class="item">
                        <input type="radio" id="" name="fav_language" value="b">
                        <label for="1b">b. ahakanosuitte</label>
                    </div>

                    <div class="item">
                        <input type="radio" id="" name="fav_language" value="c">
                        <label for="1c">c. anagasutte</label>
                    </div>

                    <div class="item">
                        <input type="radio" id="firstResponse" name="fav_language" value="d">
                        <label for="1d">d. onakasuitte</label>
                    </div>
                    
                    
                </form>
            </div> 

            <div class="box">
                <div class="question">
                    <h1>2. あのねこはきれい</h1>
                </div>
                <form action="">
                    <div class="item">
                        <input type="radio" id="" name="fav_language" value="a">
                        <label>a. sononekohakirei</label>
                    </div>
                    <div class="item">
                        <input type="radio" id="secondResponse" name="fav_language" value="b">
                        <label>b. anonekowakirei</label>
                    </div>

                    <div class="item">
                        <input type="radio" id="" name="fav_language" value="c">
                        <label>c. kononekowakirei</label>
                    </div>

                    <div class="item">
                        <input type="radio" id="" name="fav_language" value="d">
                        <label >d. funonekowakirei</label>
                    </div>
                </form>
            </div> 

            <div class="box">
                <div class="question">
                    <h1>3. このまちはたかい</h1>
                </div>
                <form action="">
                    <div class="item">
                        <input type="radio" id="thirdResponse" name="fav_language" value="a">
                        <label for="">a. konomachiwatakai</label>
                    </div>
                    <div class="item">
                        <input type="radio" id="" name="fav_language" value="b">
                        <label for="">b. konomachiinai</label>
                    </div>

                    <div class="item">
                        <input type="radio" id="" name="fav_language" value="c">
                        <label for="">c. machinonaka</label>
                    </div>

                    <div class="item">
                        <input type="radio" id="" name="fav_language" value="d">
                        <label for="">d. kokoromachiniaru</label>
                    </div>
                </form>
            </div> 

        </div>

        <div class="submit">
            <div class="btn" onclick="registrarNota()">enviar respostas</div>
        </div>

        <div class="footer">
            <div class="container borderTop">
                <div class="box">
                    <div class="text">
                        <p>Ficou com alguma duvida?</p>
                        <p>Algum ponto a adicionar?</p>
                        <p>Algum agradecimento?</p>
                        <p>ou apenas um olá?</p>
                        <p style="margin-top: 10px">
                            Envie sua mensagem e podemos conversar!
                        </p>
                    </div>
                    <div class="square1"></div>
                    <div class="ball1"></div>
                </div>
            </div>
            <div class="navigation borderTop">
                <div class="box borderRight">
                    <a href="../../index.html">
                        <p>inicio</p>
                    </a>
                </div>
                <div class="box borderRight">
                    <a href="../cursos.html">
                        <p>cursos</p>
                    </a>
                </div>
                <div class="box borderRight">
                    <a href="../perfil.html">
                        <p>perfil</p>
                    </a>
                </div>
                <div class="box">
                    <a href="../future.html">
                        <p>futuro</p>
                    </a>
                </div>
            </div>
            <div class="copyRight borderTop">
                <p>©2023. Erick Nunes</p>
            </div>
        </div>
    </div>
</body>
</html>

<script src="../../js/funcoes.js"></script>

<script>
    let nota = 0

    function calcularNota() {
        

        let fr = document.getElementById('firstResponse')
        let sr = document.getElementById('secondResponse')
        let tr = document.getElementById('thirdResponse')

        if(fr.checked) {
            nota++
        }

        if(sr.checked) {
            nota++
        }

        if(tr.checked) {
            nota++
        }

        console.log(nota)

    }

    function registrarNota() {
        calcularNota()
		var notaVar = nota;
		var idVar = sessionStorage.ID_USUARIO;
        var idiomaVar = 'testeJpn'

		fetch("/usuarios/nota", {
			method: "PUT",
			headers: {
				"Content-Type": "application/json",
			},
			body: JSON.stringify({
				notaServer: notaVar,
				idServer: idVar,
                idiomaServer: idiomaVar
			}),
		})
			.then(function (resposta) {
				console.log("resposta: ", resposta);

				if (resposta.ok) {
					notify(`voce acertou ${nota} questoes`)
                    setTimeout(() => {
                        window.location = "/pages/perfil.html";
                    }, 2000)
                    
				} else {
					throw "Houve um erro ao tentar realizar o cadastro!";
				}
			})
			.catch(function (resposta) {
				console.log(`#ERRO: ${resposta}`);
                notify('falha ao enviar resultados')
			});

		return false;
	}
</script>